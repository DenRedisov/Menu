/*! Menu - v0.1.0 - 2014-03-03
* https://github.com/filamentgroup/menu
* Copyright (c) 2014 Filament Group; Licensed MIT */
!function(a,b){"use strict";var c="Menu",d={ariaHidden:"aria-hidden"},e="menu-selected",f="a,input,[tabindex]",g=function(b){if(!b)throw new Error("Element required to initialize object");this.element=b,this.$element=a(b),this.opened=!0};g.prototype.fill=function(b){var c="";a.each(b,function(a,b){c+="<li>"+b+"</li>"}),this.$element.find("ol,ul").html(c)},g.prototype.moveSelected=function(c,d){var g,h=this.$element.find("li"),i=h.filter("."+e);if(i.length&&"start"!==c?"next"===c?(g=i.next(),g.length||(g=h.eq(0))):(g=i.prev(),g.length||(g=h.eq(h.length-1))):g=h.eq(0),i.removeClass(e),g.addClass(e),d||a(b.document.activeElement).closest(i).length)if(g.is(f))g[0].focus();else{var j=g.find(f);j.length&&j[0].focus()}},g.prototype.selectActive=function(){var b=this.$element.data(c+"-trigger"),d=this.$element.find("li."+e);b&&a(b).is("input")&&(b.value=d.text()),d.trigger(c+":select"),this.close()},g.prototype.keyDown=function(a){38===a.keyCode&&(this.moveSelected("prev"),a.preventDefault()),40===a.keyCode&&(this.moveSelected("next"),a.preventDefault()),13===a.keyCode&&this.selectActive(),27===a.keyCode&&this.close()},g.prototype._bindKeyHandling=function(){var b=this;this.$element.bind("keydown",function(a){b.keyDown(a)}).bind("mouseover",function(c){b.$element.find("."+e).removeClass(e),a(c.target).closest("li").addClass(e)}).bind("click",function(){b.selectActive()})},g.prototype.open=function(a,b){this.opened||(this.$element.attr(d.ariaHidden,!1),this.$element.data(c+"-trigger",a),this.opened=!0,this.moveSelected("start",b),this.$element.trigger(c+":open"))},g.prototype.close=function(){if(this.opened){this.$element.attr(d.ariaHidden,!0),this.opened=!1;var a=this.$element.data(c+"-trigger");a&&a.focus(),this.$element.trigger(c+":close")}},g.prototype.toggle=function(a,b){this[this.opened?"close":"open"](a,b)},g.prototype.init=function(){if(!this.$element.data(c)){this.$element.data(c,this),this.$element.attr("role","menu"),this.close();var b=this;a(document).bind("mouseup",function(){b.close()}),this._bindKeyHandling(),this.$element.trigger(c+":init")}},(b.componentNamespace=b.componentNamespace||b)[c]=g}(jQuery,this),function(a,b){var c="menu",d="[data-"+c+"]";b.fn[c]=function(){return this.each(function(){new window.componentNamespace.Menu(this).init()})},b(document).bind("enhance",function(a){b(d,a.target)[c]()})}(Menu,jQuery,this),function(a,b){"use strict";var c="Menutrigger",d=function(b){if(!b)throw new Error("Element required to initialize object");this.element=b,this.$element=a(b),this.$menu=a("#"+this.$element.attr("data-menu-trigger")),this.menu=this.$menu.data("Menu")};d.prototype._bindbehavior=function(){var a=this;this.$element.is("a")?this.$element.attr("role","button").bind("click",function(b){b.preventDefault(),a.menu.toggle(this,!0)}):this.$element.is("input")&&this.$element.bind("input keyup",function(){""===this.value?a.menu.close():a.menu.open(this,!1)}).bind("input keydown",function(b){a.menu.keyDown(b)}).bind("focus click",function(){""!==this.value&&a.menu.open()}).bind("blur",function(){a.menu.close()})},d.prototype.init=function(){this.$element.data(c)||(this.$element.data(c,this),this.$element.attr("aria-controls",this.$menu.attr("id")),this.$element.attr("aria-haspopup","true"),this._bindbehavior(),this.$element.trigger(c+":init"))},b[c]=d}(jQuery,this),function(a,b){var c="menu-trigger",d="[data-"+c+"]";b.fn[c]=function(){return this.each(function(){new a(this).init()})},b(document).bind("enhance",function(a){b(d,a.target)[c]()})}(Menutrigger,jQuery,this);